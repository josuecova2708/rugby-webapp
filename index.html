<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rugby 360</title>
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
    <header>
        <nav>
            <div class="logo">RUGBY <span>360</span></div>
            <div class="nav-buttons">
                <button class="btn-login" onclick="window.location.href = './login/login.html'">Iniciar sesión</button>
                <button class="btn-register"
                    onclick="window.location.href='./registro/registro.html'">Registrarse</button>
            </div>
        </nav>
    </header>

    <main>
        <section class="hero-image">
            <div class="image-container">
                <!-- La imagen destacada irá aquí -->
                <div class="placeholder-image">
                    <img src="./recursos/jugando-rugby.png" alt="jugando rugby">
                </div>
            </div>
        </section>

        <!-- Sección de jugadores (solo para entrenadores) -->
        <section class="players-section" id="playersSection" style="display: none;">
            <div class="section-header">
                <h2>Jugadores</h2>
            </div>
            <div class="players-container">
                <div class="players-grid" id="playersGrid">
                    <!-- Las tarjetas de jugadores se generarán dinámicamente -->
                </div>
                <div class="players-navigation">
                    <button class="nav-btn prev-btn" onclick="previousPlayers()">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <div class="players-indicators" id="playersIndicators">
                        <!-- Los indicadores se generarán dinámicamente -->
                    </div>
                    <button class="nav-btn next-btn" onclick="nextPlayers()">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </section>

        <section class="training-info">
            <div class="section-header">
                <h2>Próximo entrenamiento</h2>
            </div>
            <div class="training-details">
                <p class="training-time">18:30 pm - 21:00 pm</p>
                <p class="training-date">15 de Marzo</p>
            </div>
        </section>

        <section class="location">
            <h2>Ubicación</h2>
            <div class="location-details">
                <!-- Botones para entrenadores -->
                <div class="location-coach-actions" id="locationCoachActions" style="display: none;">
                    <button class="btn-location-action" onclick="createNewLocation()">
                        Crear nuevo
                    </button>
                    <button class="btn-location-action" onclick="editLocation()">
                        Editar
                    </button>
                </div>
            </div>
        </section>

        <section class="news-section">
            <div class="section-header">
                <h2>Noticias internas</h2>
            </div>
            <div class="news-container">
                <div class="news-text">
                    <p>Nos complace anunciar que la construcción del nuevo gimnasio del club ha comenzado oficialmente.
                        Este espacio estará equipado con máquinas de última generación, áreas de entrenamiento funcional
                        y un sector exclusivo para la recuperación física de los jugadores. El objetivo es brindar un
                        entorno de entrenamiento de primer nivel para todas las categorías, desde juveniles hasta la
                        primera. Se espera que la obra esté finalizada para el inicio de la próxima temporada. ¡Seguimos
                        sumando para mejorar día a día!</p>
                    <div class="location-coach-actions" id="locationCoachActionsNews" style="display: none;">
                        <button class="btn-location-action" onclick="goToNews()">
                            Crear nuevo
                        </button>
                    </div>
                </div>

                <div class="news-image">
                    <!-- La imagen de noticias irá aquí -->
                    <div class="placeholder-image">
                        <img src="./recursos/ejercicio.png" alt="">
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Botón FAB para entrenadores (solo visible para entrenadores) -->
    <div class="fab-container" id="fabContainer" style="display: none;">
        <button class="fab-btn" onclick="toggleCoachModal()">
           <img src="./recursos/entrenador-boton.svg" alt="">
        </button>
    </div>

    <!-- Modal de opciones para entrenadores -->
    <div class="coach-modal-overlay" id="coachModalOverlay">
        <div class="coach-modal" id="coachModal">
            <div class="modal-header">
                <button class="modal-close-btn" onclick="closeCoachModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-content">
                <div class="modal-options">
                    
                    <!-- Opción Crear Anuncio -->
                    <div class="modal-option" onclick="navigateToPage('./crearNews/crearNews.html')">
                        <div class="option-icon">
                        <img src="./recursos/anuncio-logo.svg" alt="">  
                        </div>
                        <span class="option-label">Crear anuncio</span>
                    </div>

                    <!-- Opción Mensaje -->
                    <div class="modal-option" onclick="navigateToPage('./crearAnuncio/crearAnuncio.html')">
                        <div class="option-icon">
                            <img src="./recursos/mensaje-logo.svg" alt="">
                        </div>
                        <span class="option-label">Mensaje</span>
                    </div>

                    <!-- Opción Entrenamiento -->
                    <div class="modal-option" onclick="navigateToPage('./crearEntrenamiento/crearEntrenamiento.html')">
                        <div class="option-icon">
                            <img src="./recursos/entrenamiento-logo.svg" alt="">
                        </div>
                        <span class="option-label">Entrenamiento</span>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-logo">
                <div class="rugby-ball-icon">
                    <!-- Aquí iría el logo de la pelota de rugby -->
                    <img src="./recursos/balon-logo.svg" alt="">
                </div>
            </div>
            <div class="contacto-nosotros">
                <div class="contact-info">
                    <h3>Contacto</h3>
                    <p><i class="fas fa-phone"></i> (+54) 11 3456-7890</p>
                    <p><i class="fas fa-envelope"></i> loscardosclub@gmail.com</p>
                </div>

                <div class="nosotros">
                    <h3>Nosotros</h3>
                    <p>Acerca del club</p>
                </div>

            </div>

            <div class="terms">
                <a href="./terms/terms.html">Términos y condiciones</a>
                <div class="social-media">
                    <a href="#" class="social-icon facebook">
                        <img src="./recursos/facebook-logo.svg" alt="">
                    </a>
                    <a href="#" class="social-icon instagram">
                        <img src="./recursos/instagram-logo.svg" alt="">
                        </i></a>
                </div>
            </div>
        </div>
    </footer>

    <script src="./auth.js"></script>
    <script>
        // Datos de jugadores para el entrenador
        const playersData = [
            {
                name: "Juan Serra",
                position: "3ra línea - Apertura",
                status: "Activo - Primera",
                attendance: "80%",
                photo: "./recursos/player-martinez.jpg"
            },
            {
                name: "Mario Coronel",
                position: "Centro",
                status: "Activo - Primera",
                attendance: "85%",
                photo: "./recursos/player-martinez.jpg"
            },
            {
                name: "Agustín Montenegro",
                position: "Ala",
                status: "Activo - Primera",
                attendance: "90%",
                photo: "./recursos/player-martinez.jpg"
            },
            {
                name: "Lucas González",
                position: "Hooker",
                status: "Activo - Primera",
                attendance: "75%",
                photo: "./recursos/player-martinez.jpg"
            },
            {
                name: "Luciano Valdez",
                position: "Tercera línea",
                status: "Activo - Primera",
                attendance: "88%",
                photo: "./recursos/player-martinez.jpg"
            },
            {
                name: "Federico Martín",
                position: "Apertura",
                status: "Activo - M21",
                attendance: "92%",
                photo: "./recursos/player-martinez.jpg"
            },
            {
                name: "Carlos Rodríguez",
                position: "Centro",
                status: "Activo - Primera",
                attendance: "82%",
                photo: "./recursos/player-martinez.jpg"
            },
            {
                name: "Diego Fernández",
                position: "Wing",
                status: "Activo - M21",
                attendance: "86%",
                photo: "./recursos/player-martinez.jpg"
            },
            {
                name: "Sebastián García",
                position: "Fullback",
                status: "Activo - M21",
                attendance: "89%",
                photo: "./recursos/player-martinez.jpg"
            },
            {
                name: "Nicolás Torres",
                position: "Pilar",
                status: "Activo - Primera",
                attendance: "78%",
                photo: "./recursos/player-martinez.jpg"
            }
        ];

        let currentPlayerPage = 0;
        const playersPerPage = 6;

        // Inicializar cuando carga la página
        document.addEventListener('DOMContentLoaded', function () {
            // Verificar si hay usuario logueado y actualizar navegación
            if (typeof auth !== 'undefined') {
                auth.updateNavigation();

                // Si es entrenador, mostrar sección de jugadores, botones de ubicación y FAB
                if (auth.isLoggedIn() && auth.isCoach()) {
                    showPlayersSection();
                    showLocationActions();
                    showCoachFAB();
                }
            }
        });

        // Mostrar FAB para entrenadores
        function showCoachFAB() {
            const fabContainer = document.getElementById('fabContainer');
            fabContainer.style.display = 'block';
        }

        // Toggle del modal de entrenador
        function toggleCoachModal() {
            const modal = document.getElementById('coachModalOverlay');
            const isVisible = modal.style.display === 'flex';
            
            if (isVisible) {
                closeCoachModal();
            } else {
                openCoachModal();
            }
        }

        // Abrir modal
        function openCoachModal() {
            const modal = document.getElementById('coachModalOverlay');
            modal.style.display = 'flex';
            modal.classList.add('modal-opening');
            
            // Agregar el event listener DESPUÉS de abrir
            setTimeout(() => {
                modal.classList.remove('modal-opening');
                addModalListeners();
            }, 300);
        }

        // Cerrar modal
        function closeCoachModal() {
            const modal = document.getElementById('coachModalOverlay');
            modal.classList.add('modal-closing');
            
            // Remover event listeners
            removeModalListeners();
            
            setTimeout(() => {
                modal.style.display = 'none';
                modal.classList.remove('modal-closing');
            }, 300);
        }

        // Agregar listeners cuando el modal está abierto
        function addModalListeners() {
            const modal = document.getElementById('coachModalOverlay');
            modal.addEventListener('click', handleModalClick);
        }

        // Remover listeners cuando el modal se cierra
        function removeModalListeners() {
            const modal = document.getElementById('coachModalOverlay');
            modal.removeEventListener('click', handleModalClick);
        }

        // Manejar clics en el modal
        function handleModalClick(event) {
            const modalContent = document.getElementById('coachModal');
            
            // Si el clic fue fuera del contenido del modal, cerrarlo
            if (event.target === event.currentTarget) {
                closeCoachModal();
            }
        }

        // Navegar a página específica
        function navigateToPage(url) {
            closeCoachModal();
            setTimeout(() => {
                window.location.href = url;
            }, 200);
        }

        // Mostrar botones de ubicación para entrenadores
        function showLocationActions() {
            const locationActions = document.getElementById('locationCoachActions');
            locationActions.style.display = 'flex';
            const locationActionsNews = document.getElementById('locationCoachActionsNews');
            locationActionsNews.style.display = 'flex';
        }

        // Funciones para los botones de ubicación
        function createNewLocation() {
            window.location.href = './crearEntrenamiento/crearEntrenamiento.html';
        }
        
        function goToNews() {
            window.location.href = './crearNews/crearNews.html';
        }
        
        function editLocation() {
            alert('Editar ubicación - Funcionalidad próximamente');
            // Aquí iría la lógica para editar ubicación existente
        }

        // Mostrar sección de jugadores para entrenadores
        function showPlayersSection() {
            const playersSection = document.getElementById('playersSection');
            playersSection.style.display = 'block';

            generatePlayersGrid();
            generateIndicators();
        }

        // Generar grid de jugadores
        function generatePlayersGrid() {
            const playersGrid = document.getElementById('playersGrid');
            const startIndex = currentPlayerPage * playersPerPage;
            const endIndex = Math.min(startIndex + playersPerPage, playersData.length);

            playersGrid.innerHTML = '';

            for (let i = startIndex; i < endIndex; i++) {
                const player = playersData[i];
                const playerCard = document.createElement('div');
                playerCard.className = 'player-card';

                playerCard.innerHTML = `
                    <div class="player-photo">
                        <img src="${player.photo}" alt="${player.name}" 
                             onerror="this.src='./recursos/sergio.jpg'">
                    </div>
                    <div class="player-info">
                        <div class="player-name">${player.name}</div>
                        <div class="player-position">${player.position}</div>
                        <div class="player-status">
                            <span class="status-indicator"></span>
                            ${player.status}
                        </div>
                        <div class="player-attendance">Asistencia ${player.attendance}</div>
                    </div>
                `;

                playersGrid.appendChild(playerCard);
            }
        }

        // Generar indicadores de páginas
        function generateIndicators() {
            const playersIndicators = document.getElementById('playersIndicators');
            const totalPages = Math.ceil(playersData.length / playersPerPage);

            playersIndicators.innerHTML = '';

            for (let i = 0; i < totalPages; i++) {
                const indicator = document.createElement('div');
                indicator.className = `indicator ${i === currentPlayerPage ? 'active' : ''}`;
                indicator.onclick = () => goToPlayerPage(i);
                playersIndicators.appendChild(indicator);
            }
        }

        // Navegar a página específica
        function goToPlayerPage(page) {
            const totalPages = Math.ceil(playersData.length / playersPerPage);
            if (page >= 0 && page < totalPages) {
                currentPlayerPage = page;
                generatePlayersGrid();
                generateIndicators();
            }
        }

        // Página anterior
        function previousPlayers() {
            goToPlayerPage(currentPlayerPage - 1);
        }

        // Página siguiente
        function nextPlayers() {
            goToPlayerPage(currentPlayerPage + 1);
        }

     

        document.getElementById('coachModalOverlay').addEventListener('click', function(event) {
    // Solo cerrar si el clic es en el overlay, no en el modal
    if (event.target === this) {
        closeCoachModal();
    }
});
    </script>
</body>

</html>